namespace = high_command

country_event = {
	id = high_command.1
	is_triggered_only = yes
	hide_window = yes
	fire_only_once = yes
	trigger = {
		has_origin = origin_katzen
	}

	immediate = {
		#Set Initial Flags
		set_country_flag = kaiser_inactive
		set_country_flag = douclaw_inactive
		set_country_flag = loris_inactive
		set_country_flag = meolson_inactive
		set_country_flag = steve_inactive
		set_country_flag = wolfgang_inactive
		set_country_flag = dietrich_inactive
		set_country_flag = flopparnold_inactive
		set_country_flag = itch_inactive
		set_country_flag = gunfur_inactive
		set_country_flag = katzsauffe_inactive
		set_country_flag = kimitz_inactive
		set_country_flag = koko_inactive
		set_country_flag = meorwin_inactive
		set_country_flag = pawllas_inactive
		set_country_flag = pawtton_inactive
		set_country_flag = katzmann_inactive
		set_country_flag = lilith_inactive
		set_country_flag = novasum_inactive
		set_country_flag = pawlbert_inactive
		set_country_flag = tarynn_inactive
		set_country_flag = birch_inactive
		set_country_flag = garf_inactive
		set_country_flag = katzhaum_inactive
		set_country_flag = rex_inactive
		set_country_flag = strobel_inactive
		set_country_flag = stron_inactive
		set_country_flag = ungers_inactive

		high_command_set_active = { PARAM = kaiser }
		high_command_set_active = { PARAM = douclaw }
		high_command_set_active = { PARAM = loris }
		high_command_set_active = { PARAM = pawlbert }
		high_command_set_active = { PARAM = meolson }
	}
}

country_event = {
	id = high_command.2
	title = high_command.2.title
	desc = high_command.2.desc

	is_triggered_only = yes

	diplomatic = yes
	custom_gui = "kaiser_high_command"
}


country_event = { #Koko von beumien
	id = misc.51
	title = misc.51.title
	desc = misc.51.desc
	show_sound = par_portrait_02
	picture = GFX_leader_recruitment_bg_renowned
	is_triggered_only = yes
	fire_only_once = yes

	trigger = {
		last_increased_tech = tech_cloaking_1
	}

	event_window_type = leader_recruit

	immediate = {
		define_katzen_high_command_portrait = { SPECIES = KATZ LEADER = koko CLASS = FLSN }
		ethic_leader_creator = {
			SPECIES_CLASS = MAM
			LEADER_PORTRAIT = mam14
			CLASS = admiral
			NAME = "NAME_koko"
			LEVEL = 4
			GENDER = FEMALE
			IMMORTAL = no
			ETHIC = militarist
			DESC = kokodesc
			CATCH_PHRASE = koko_catch_phrase
		}
		last_created_leader = {
			add_trait = subclass_admiral_tactician
			add_trait = leader_trait_koko
			add_trait = katzen_trait_elite
			add_trait = leader_trait_trickster_2
			add_trait = leader_trait_micromanager
			set_age = 28
			save_global_event_target_as = koko
		}
	}

	picture_event_data = {
		portrait = event_target:ethic_leader
		room = ethic_spaceship_room
	}

	option = {
		name = DISMISS
		tag = dismiss_leader
		hidden_effect = {
			event_target:koko = {
				kill_leader = {
					flag = koko show_notification = no
				}
			}
		}
	}
	option = {
		name = misc.51.a
		response_text = misc.51.a.response
		is_dialog_only = yes
	}
	option = {
		name = misc.51.b
		response_text = misc.51.b.response
		is_dialog_only = yes
	}
	option = {
		name = misc.51.c
		response_text = misc.51.c.response
		is_dialog_only = yes
	}
	option = {
		name = HIRE
		tag = hire_leader
		custom_tooltip = misc.51.hire_custom_tooltip
		hidden_effect = {
			set_country_flag = koko_active
			ethic_leader_hire_effect = {
				GLOBAL_EVENT_TARGET = koko
			}
			create_fleet = {
				name = "Experimental-Unterraumboot"
				effect = {
					set_owner = root
					while = {
						count = 5
						create_ship = {
							name = "U-Boot"
							design = "Koko"
							prefix = yes
						}
					}
					set_location = root.capital_scope
					assign_leader = event_target:koko
				}
			}
		}
	}
}

