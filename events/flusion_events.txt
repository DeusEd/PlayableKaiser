################################
#
# Exodus Events
#
###############################

namespace = flusion

event = {
	id = flusion.1
	hide_window = yes
	is_triggered_only = yes	
	immediate = {
		set_global_flag = pki_enabled
		every_playable_country = {
			limit = { has_origin = origin_katzen }
			country_event = { id = flusion.4 }
			country_event = { id = kaiser_bureau.0 days = 30 }
		}
	}
}

planet_event = {
	id = flusion.3
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		if = {
			limit = {
				has_planet_flag = flusion
			}
			set_planet_entity = {
				entity = "flusion_planet_entity"
			}
		}
	}
}

country_event = {
	id = flusion.4
	hide_window = yes

	is_triggered_only = yes
	trigger = {
		NOT = { has_country_flag = flusion_setup_complete }
	}
	immediate = {
		save_global_event_target_as = katzenartig
		owner_species = {
			save_global_event_target_as = pki_katzen_species
		}
		#	#DOCS

		#	begin_event_chain = {
		#		event_chain = kaiser_docs_chain
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.1
		#		name = "kaiser_docs_1"
		#		desc = "kaiser_docs_1_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.2
		#		name = "kaiser_docs_2"
		#		desc = "kaiser_docs_2_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.3
		#		name = "kaiser_docs_3"
		#		desc = "kaiser_docs_3_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	create_point_of_interest = {
		#		id = kaiser_docs_chain.4
		#		name = "kaiser_docs_4"
		#		desc = "kaiser_docs_4_desc"
		#		event_chain = "kaiser_docs_chain"
		#		location = capital_scope
		#	}

		#	
		#END DOCS
			
		set_country_flag = pki_hasnt_used_ehve

		add_modifier = {
			modifier = no_ftl_capability days = -1
		}
		#Target flusion
		every_galaxy_planet = { 
			if = {
				limit = {
					solar_system = { has_star_flag = flusion_system }
					}	
				save_global_event_target_as = jublio_system
				}
			if = {
				limit = {
						planet = { has_planet_flag = gigaflusion }
					}
				save_global_event_target_as = flusionhome
				}
			}

		#Leader Portraits

		create_species = {
			name = "Imperial Katzen"
			plural = "Imperial Katzens"
			class = Flusionian
			portrait = Kattail_1
			homeworld = event_target:gigaflusion
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_quick_learners
				trait = trait_talented
				trait = trait_venerable
			}
			
			effect = {
				set_global_flag = kaiser_portrait_defined
				save_global_event_target_as = kaiser_portrait_hd
			}
			
		}

		create_species = {
			name = "Imperial Katzen"
			plural = "Imperial Katzens"
			class = Flusionian
			portrait = kaiser
			homeworld = event_target:gigaflusion
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_quick_learners
				trait = trait_talented
				trait = trait_venerable
			}
			effect = {
				set_global_flag = kaiser_portrait_defined
				save_global_event_target_as = kaiser_portrait_pvz
			}

		}
		

		#Make the soulbot species
		create_species = {
			name = "Soulbot"
			plural = "Soulbots"
			class = ROBOT
			portrait = default_robot
			traits = {
				trait = trait_mechanical
				trait = trait_robot_enhanced_memory
				trait = trait_robot_learning_algorithms
				trait = trait_robot_luxurious
				trait = trait_robot_custom_made
			}
			effect = {
				save_global_event_target_as = soulbot
			}
		}

		event_target:flusionhome = {
		#Flusion Species
		#Haranians
		create_species = {
			name = "Haranian"
			plural = "Haranians"
			class = HUM
			portrait = humanoid_05
			homeworld = this
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_intelligent
				trait = trait_decadent
			}
			effect = {
				save_global_event_target_as = haranians
			}
		} 
		#Lauranaise
		 create_species = {
			name = "Lauranaise"
			plural = "Lauranaise"
			class = REP
			portrait = rep8
			homeworld = this
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_rapid_breeders
			}
			effect = {
				save_global_event_target_as = lauranaise
			}
		}
		 #SYmbies
		 create_species = {
			name = "Wacegi"
			plural = "Wacegis"
			class = FUN
			portrait = fun11
			homeworld = this
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_strong
				trait = trait_nomadic
			}
			effect = {
				save_global_event_target_as = symbies
			}
		}
		 #Yinjites
		 create_species = {
			name = "Yinjite"
			plural = "Yinjites"
			class = HUM
			portrait = humanoid_hp_09
			homeworld = this
			traits = {
				trait = trait_pc_continental_preference
				trait = trait_industrious
				trait = trait_sedentary
			}
			effect = {
				save_global_event_target_as = yinjites
			}
		}
			#Ezics
				create_species = {
					name = "Zuspri"
					plural = "Zuspri"
					class = REP
					portrait = rep10
					homeworld = this
					traits = {
						trait = trait_pc_continental_preference
						trait = trait_venerable
						trait = trait_adaptive
						trait = trait_strong
						trait = trait_slow_learners
						trait = trait_quarrelsome
						trait = trait_slow_breeders
					}
					effect = {
						save_global_event_target_as = ezics
					}
				}

			#Kronks
				create_species = {
					name = "Kronk"
					plural = "Kronks"
					class = ART
					portrait = art15
					homeworld = this
					traits = {
						trait = trait_pc_continental_preference
						trait = trait_industrious
						trait = trait_rapid_breeders
						trait = trait_sedentary
						trait = trait_repugnant
					}
					effect = {
						save_global_event_target_as = kronks
					}
				}

			#Roqualians
				create_species = {
					name = "Roqualian"
					plural = "Roqualians"
					class = HUM
					portrait = human
					homeworld = this
					traits = {
						trait = trait_pc_continental_preference
						trait = trait_intelligent
						trait = trait_charismatic
						trait = trait_resilient
						trait = trait_wasteful
					}
					effect = {
						save_global_event_target_as = solakians
					}
				}

			#Mercurians
				create_species = {
					name = "Mercurian"
					plural = "Mercurians"
					class = PLANT
					portrait = pla14
					homeworld = this
					traits = {
						trait = trait_pc_continental_preference
						trait = trait_intelligent
						trait = trait_sedentary
						trait = trait_wasteful
					}
					effect = {
						save_global_event_target_as = mercurians
					}
				}
			#Ravkanians
			create_species = {
				name = "Ravkan"
				plural = "Ravkans"
				class = HUM
				portrait = humanoid_hp_01
				homeworld = this
				traits = {
					trait = trait_pc_continental_preference
					trait = trait_intelligent
					trait = trait_sedentary
					trait = trait_wasteful
				}
				effect = {
					save_global_event_target_as = ravkans
				}
			}
			
			#Zousanians
			create_species = {
				name = "Linterian"
				plural = "Linterians"
				class = AVI
				portrait = avi11
				homeworld = this
				traits = {
					trait = trait_pc_continental_preference
					trait = trait_talented
					trait = trait_traditional
					trait = trait_decadent
				}
				effect = {
					save_global_event_target_as = zousans
				}
			}

			#Cookians
				create_species = {
					name = "Galletian"
					plural = "Galletians"
					class = FUN
					portrait = fun1
					homeworld = this
					traits = {
						trait = trait_pc_continental_preference
						trait = trait_delicious
						trait = trait_erudite
						trait = trait_wasteful
					}
					effect = {
						save_global_event_target_as = cookians
					}
				}
			#Droog
			create_species = {
				name = "Droog"
				plural = "Droog"
				class = HUM
				portrait = humanoid_03
				homeworld = this
				traits = {
					trait = trait_pc_continental_preference
					trait = trait_strong
				}
				effect = {
					save_global_event_target_as = droog
				}
			}

			#Cyat
			create_species = {
				name = "Cyat"
				plural = "Cyats"
				class = MAM
				portrait = mam14
				homeworld = this
				traits = {
					trait = trait_pc_continental_preference
					trait = trait_strong
				}
				effect = {
					save_global_event_target_as = cyatianalas
				}
			}
		}


		ruler = {
			change_species = event_target:kaiser_portrait_hd
			change_leader_portrait = event_target:kaiser_portrait_hd
			set_name = "Kattail"
			set_skill = 4
			change_leader_class = admiral
			set_gender = male
			set_immortal = yes
			
			set_age = 189
			add_trait = leader_trait_ruler_kaiser_cattail
			add_trait = trait_ruler_charismatic_2
			add_trait = trait_ruler_military_pioneer
			add_trait = leader_trait_intimidator
			add_trait = subclass_admiral_strategist
			set_leader_flag = kaiser_kattail
			set_leader_flag = legendary_leader
			set_leader_flag = immune_to_negative_traits
			set_leader_flag = leader_death_events_blocked
			save_global_event_target_as = kaiser_kattail
		}


		random_owned_leader = {
			limit = {
				leader_class = governor
				NOT = {
					has_leader_flag = flusion_modified
				}
			} 
			set_leader_flag = kill_yourself_now
			kill_leader = { flag = kill_yourself_now show_notification = no }
		}

		random_owned_leader = {
			limit = {
				leader_class = scientist
				NOT = {
					has_leader_flag = flusion_modified
				}
			}
			set_is_female = no
			set_name = "Pawlbert"
			set_leader_flag = flusion_modified
			add_trait = katzen_trait_elite
		}

	#	random_owned_leader = {
	#		limit = {
	#			leader_class = scientist
	#			NOT = {
	#				has_leader_flag = flusion_modified
	#			}
	#		}
	#		set_is_female = yes
	#		set_name = "Gatorynn"
	#		set_leader_flag = flusion_modified
	#		add_trait = leader_trait_stubborn
	#		add_trait = katzen_trait_elite
	#	}

		# random_owned_leader = {
		# 	limit = {
		# 		leader_class = scientist
		# 		NOT = {
		# 			has_leader_flag = flusion_modified
		# 		}
		# 	}
		# 	change_species = event_target:ezics
		# 	set_is_female = yes
		# 	change_leader_portrait = species
		# 	set_name = "Karrette"
		# 	set_leader_flag = flusion_modified
		# 	add_trait = katzen_trait_elite
		# }

	#Create Pawtton
		create_leader = {
			class = general
			species = owner_main_species
			name = "Meorge Pawtton"
			gender = male
			skill = 3
			immortal = yes
			traits = {
				trait = katzen_trait_elite
				trait = katzen_trait_nukelad_general
			}
		}	
		last_created_leader = {
			set_leader_flag = pawtton
			save_global_event_target_as = pawtton
			clear_global_event_target = kaiser_portrait
		}

	#Create Loris
		create_leader = {
			class = governor
			species = owner_main_species
			name = "Loris Von Kattensbach"
			gender = male
			skill = 3
			immortal = yes
			traits = {
				trait = katzen_trait_elite
				trait = leader_trait_architectural_interest
				trait = leader_trait_army_veteran
			}
		}
		last_created_leader = {
			change_leader_portrait = loris
			set_leader_flag = loris
			save_global_event_target_as = loris
		}

		event_target:playerflusion = {
			assign_leader = event_target:loris
		}

	#Create Douclaw
		create_leader = {
			class = admiral
			species = owner_main_species
			name = "Douclaw MacCathur"
			gender = male
			skill = 3
			immortal = yes
			set_age = 57
			traits = {
				trait = katzen_trait_elite
				trait = katzen_trait_nukelad
				trait = katzen_trait_blitzkrieg
			}
		}
		last_created_leader = {
			change_leader_portrait = douclaw
			set_leader_flag = douclaw
			save_global_event_target_as = douclaw
		}

	#Create Flusion Nations
	#Haranians
	create_country = {
		name = "NAME_Haranian"
		adjective = "NAME_Haranians"
		ethos = {
			ethic = ethic_authoritarian
			ethic = ethic_xenophobe
			ethic = ethic_pacifist
		}
		authority = auth_imperial
		civics = random
		origin = origin_default_pre_ftl
		flag = random
		species = event_target:haranians
		type = flusion_nation
		effect = {
			save_global_event_target_as = haranian_flunat
			set_country_flag = flusion_nation_haranian
		}
	}
	event_target:haranian_flunat = {
		create_leader = {
			class = general
			species = event_target:haranian
			name = "Fantasia"
			skill = 5
			set_age = 52
			gender = female
			traits = {
				trait = katzen_trait_elite
			}
			effect = {
				set_leader_flag = fantasia
				save_global_event_target_as = fantasia_flunat
			}
		}
		set_leader = event_target:fantasia_flunat
		establish_communications_no_message = root
	}
	#Lauranaise
	create_country = {
		name = "NAME_Lauranaise"
		adjective = "NAME_Lauranaises"
		ethos = {
			ethic = ethic_authoritarian
			ethic = ethic_xenophobe
			ethic = ethic_militarist
		}
		authority = auth_oligarchic
		civics = random
		origin = origin_default_pre_ftl
		flag = random
		species = event_target:lauranaise
		type = flusion_nation
		effect = {
			save_global_event_target_as = lauranaise_flunat
			set_country_flag = flusion_nation_lauranaise
		}
	}
	event_target:lauranaise_flunat = {
		create_leader = {
			class = admiral
			species = event_target:lauranaise
			name = "Aaron N. Bleu"
			skill = 4
			set_age = 36
			gender = male
			traits = {
				trait = katzen_trait_elite
			}
			effect = {
				set_leader_flag = aaron
				save_global_event_target_as = aaron_flunat
			}
		}
		set_leader = event_target:aaron_flunat
		establish_communications_no_message = root
	}
	#Symbies
	create_country = {
		name = "NAME_Symbies"
		adjective = "NAME_Symbie"
		ethos = {
			ethic = ethic_fanatic_egalitarian
			ethic = ethic_xenophile
		}
		authority = auth_democratic
		civics = random
		origin = origin_default_pre_ftl
		flag = random
		species = event_target:symbies
		type = flusion_nation
		effect = {
			save_global_event_target_as = symbie_flunat
			set_country_flag = flusion_nation_symbies
		}
	}
	event_target:symbie_flunat = {
		create_leader = {
			class = governor
			species = event_target:symbies
			name = "James Madjacks"
			skill = 2
			set_age = 43
			gender = female
			traits = {
				trait = katzen_trait_elite
			}
			effect = {
				set_leader_flag = james
				save_global_event_target_as = james_flunat
			}
		}
		set_leader = event_target:james_flunat
		establish_communications_no_message = root
	}		
	#Yinjites
		create_country = {
			name = "NAME_Yinjites"
			adjective = "NAME_Yinjite"
			ethos = {
				ethic = ethic_materialist
				ethic = ethic_egalitarian
				ethic = ethic_militarist
			}
			authority = auth_democratic
			civics = random
			origin = origin_default_pre_ftl
			flag = random
			species = event_target:yinjites
			type = flusion_nation
			effect = {
				save_global_event_target_as = yinjite_flunat
				set_country_flag = flusion_nation_yinjites
			}
		}
		event_target:yinjite_flunat = {
			create_leader = {
				class = scientist
				species = event_target:yinjites
				name = "Tezu Doe"
				skill = 5
				set_age = 46
				gender = female
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = tezu
					save_global_event_target_as = tezu_flunat
				}
			}
			set_leader = event_target:tezu_flunat
			establish_communications_no_message = root
		}	
	#Cyatianala
		create_country = {
			name = "NAME_Cyatianalas"
			adjective = "NAME_Cyatianala"
			ethos = {
				ethic = ethic_spiritualist
				ethic = ethic_militarist
				ethic = ethic_xenophile
			}
			authority = auth_imperial
			civics = random
			origin = origin_default_pre_ftl
			flag = random
			species = event_target:cyatianalas
			type = flusion_nation
			effect = {
				save_global_event_target_as = cyatianala_flunat
				set_country_flag = flusion_nation_cyatianala
			}
		}
		event_target:cyatianala_flunat = {
			create_leader = {
				class = scientist
				species = event_target:cyatianalas
				name = "Kittita"
				skill = 5
				set_age = 46
				gender = female
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = kittita
					save_global_event_target_as = kittita_flunat
				}
			}
			set_leader = event_target:kittita_flunat
			establish_communications_no_message = root
		}	
	#Mercuria
		create_country = {
			name = "NAME_Mercurians"
			adjective = "NAME_Mercuria"
			ethos = {
				ethic = ethic_fanatic_spiritualist
				ethic = ethic_militarist
			}
			authority = auth_imperial
			civics = random
			origin = origin_default_pre_ftl
			flag = random
			species = event_target:mercurians
			type = flusion_nation
			effect = {
				save_global_event_target_as = mercuria_flunat
				set_country_flag = flusion_nation_mercuria
			}
		}
		event_target:mercuria_flunat = {
			create_leader = {
				class = admiral
				species = event_target:mercurians
				name = "King Aven Moll"
				skill = 5
				set_age = 46
				gender = male
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = cattail
					save_global_event_target_as = cattail_flunat
				}
			}
			set_leader = event_target:cattail_flunat
			establish_communications_no_message = root
		}  
		#Ezicanian Empire
		 create_country = {
			name = "NAME_Ezics"
			adjective = "NAME_Ezic"
			ethos = {
				ethic = ethic_fanatic_pacifist
				ethic = ethic_xenophobe
			}
			authority = auth_oligarchic
			civics = random
			origin = origin_default_pre_ftl
			flag = random
			species = event_target:ezics
			type = flusion_nation
			effect = {
				save_global_event_target_as = ezic_flunat
				set_country_flag = flusion_nation_ezic
			}
		}
		event_target:ezic_flunat = {
			create_leader = {
				class = governor
				species = event_target:ezic
				name = "Hornsfelt"
				skill = 5
				set_age = 46
				gender = male
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = hornsfelt
					save_global_event_target_as = hornsfelt_flunat
				}
			}
			set_leader = event_target:hornsfelt_flunat
			establish_communications_no_message = root
		} 
	#Droog
	 create_country = {
		name = "NAME_Droog"
		adjective = "NAME_Droogs"
		ethos = {
			ethic = ethic_fanatic_xenophile
			ethic = ethic_egalitarian
		}
		authority = auth_democratic
		civics = random
		origin = origin_default_pre_ftl
		flag = random
		species = event_target:droog
		type = flusion_nation
		effect = {
			save_global_event_target_as = droog_flunat
			set_country_flag = flusion_nation_droog
		}
	}
	event_target:droog_flunat = {
		create_leader = {
			class = scientist
			species = event_target:droog
			name = "Xavier Damascus"
			skill = 4
			set_age = 28
			gender = male
			traits = {
				trait = katzen_trait_elite
			}
			effect = {
				set_leader_flag = xavier
				save_global_event_target_as = xavier_flunat
			}
		}
		set_leader = event_target:xavier_flunat
		establish_communications_no_message = root
	}
	#Zousa 
	create_country = {
		name = "NAME_Zousans"
		adjective = "NAME_Zousan"
		ethos = {
			ethic = ethic_fanatic_spiritualist
			ethic = ethic_authoritarian
		}
		authority = auth_imperial
		civics = random
		origin = origin_default_pre_ftl
		flag = random
		species = event_target:zousans
		type = flusion_nation
		effect = {
			save_global_event_target_as = zousan_flunat
			set_country_flag = flusion_nation_zousa
		}
	}
	event_target:zousan_flunat = {
		create_leader = {
			class = governor
			species = event_target:zousans
			name = "Dimora"
			skill = 2
			set_age = 34
			gender = female
			traits = {
				trait = katzen_trait_elite
			}
			effect = {
				set_leader_flag = dimora
				save_global_event_target_as = dimora_flunat
			}
		}
		set_leader = event_target:dimora_flunat
		establish_communications_no_message = root
	}
	 #Ravkans
	 create_country = {
		name = "NAME_Ravkans"
		adjective = "NAME_Ravkan"
		ethos = {
			ethic = ethic_xenophobe
			ethic = ethic_spiritualist
			ethic = ethic_authoritarian
		}
		authority = auth_dictatorial
		civics = random
		origin = origin_default_pre_ftl
		flag = random
		species = event_target:ravkans
		type = flusion_nation
		effect = {
			save_global_event_target_as = ravkan_flunat
			set_country_flag = flusion_nation_ravka
		}
	}
	event_target:ravkan_flunat = {
		create_leader = {
			class = general
			species = event_target:ravkans
			name = "Sunchen Muhame"
			skill = 3
			set_age = 87
			gender = male
			traits = {
				trait = katzen_trait_elite
			}
			effect = {
				set_leader_flag = sunchen
				save_global_event_target_as = sunchen_flunat
			}
		}
		set_leader = event_target:sunchen_flunat
		establish_communications_no_message = root
	}
	 	create_country = {
			name = "NAME_Solakians"
			adjective = "NAME_Solakian"
			ethos = {
				ethic = ethic_xenophile
				ethic = ethic_materialist
				ethic = ethic_egalitarian
			}
			authority = auth_democratic
			civics = random
		    origin = origin_default_pre_ftl
			flag = {
				icon={
					category="flusionian"
					file="solakia_flag.dds"
				}
				background={
					category="backgrounds"
					file="circle.dds"
				}
				colors={
					"dark_purple"
					"purple"
					"null"
					"null"
				}
			}
			species = event_target:solakians
			type = flusion_nation
			effect = {
				save_global_event_target_as = solakia_flunat
				set_country_flag = flusion_nation_solakia
			}
		}
		event_target:solakia_flunat = {
			create_leader = {
				class = scientist
				species = event_target:solakians
				name = "Dofus Tequenik Machina"
				skill = 4
				set_age = 41
				gender = male
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = dofus
					save_global_event_target_as = dofus_flunat
				}
			}
			set_leader = event_target:dofus_flunat
			establish_communications_no_message = root
		}
	 #Cookian Steppes
		create_country = {
			name = "NAME_Cookies"
			adjective = "NAME_Cookie"
			ethos = {
				ethic = ethic_authoritarian
				ethic = ethic_fanatic_materialist
			}
			authority = auth_dictatorial
			civics = random
		    origin = origin_default_pre_ftl
			flag = {
				icon={
					category="ornate"
					file="flag_ornate_14.dds"
				}
				background={
					category="backgrounds"
					file="pattern_01.dds"
				}
				colors={
					"ochre_brown"
					"white"
					"null"
					"null"
				}
			}
			species = event_target:cookians
			type = flusion_nation
			effect = {
				save_global_event_target_as = cookie_flunat
				set_country_flag = flusion_nation_cookie
			}
		}
		event_target:cookie_flunat = {
			create_leader = {
				class = governor
				species = event_target:cookians
				name = "Troy Baker"
				skill = 4
				set_age = 41
				gender = male
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = cookie
					save_global_event_target_as = cookie_lead_flunat
				}
			}
			set_leader = event_target:cookie_lead_flunat
			establish_communications_no_message = root
		}
	 #Kronk
		create_country = {
			name = "NAME_Kronks"
			adjective = "NAME_Kronk"
			ethos = {
				ethic = ethic_authoritarian
				ethic = ethic_xenophobe
				ethic = ethic_spiritualist
			}
			authority = auth_oligarchic
			civics = random
		    origin = origin_default_pre_ftl
			flag = {
				icon={
					category="domination"
					file="domination_6.dds"
				}
				background={
					category="backgrounds"
					file="stripe.dds"
				}
				colors={
					"dark_red"
					"blue"
					"null"
					"null"
				}
			}
			species = event_target:kronks
			type = flusion_nation
			effect = {
				save_global_event_target_as = kronk_flunat
				set_country_flag = flusion_nation_kronk
			}
		}
		event_target:kronk_flunat = {
			create_leader = {
				class = admiral
				species = event_target:kronks
				name = "Kronk"
				skill = 4
				set_age = 41
				gender = male
				traits = {
					trait = katzen_trait_elite
				}
				effect = {
					set_leader_flag = kronk
					save_global_event_target_as = kronk_lead_flunat
				}
			}
			set_leader = event_target:kronk_lead_flunat
			establish_communications_no_message = root
		}

	#Setup Flusion
		save_event_target_as = flusion_owner
		capital_scope = {
			set_planet_size = 16
			clear_blockers = yes
			clear_deposits = yes
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }
			random_pop = { kill_pop = yes }

			# while = {
			# 	count = 5
			# 	create_pop = {
			# 		species = event_target:ezics
			# 	}
			# }

			# while = {
			# 	count = 5
			# 	create_pop = {
			# 		species = event_target:kronks
			# 	}
			# }

			# while = {
			# 	count = 6
			# 	create_pop = {
			# 		species = event_target:flusionians
			# 	}
			# }
			
			# while = {
			# 	count = 4
			# 	create_pop = {
			# 		species = event_target:solakians
			# 	}
			# }

			remove_district = district_city
			remove_district = district_city

			remove_district = district_industrial

			remove_district = district_generator
			remove_district = district_generator

			remove_district = district_mining

			remove_district = district_farming

			remove_building = building_commercial_zone
			remove_building = building_bureaucratic_1

			add_building = building_stronghold

			add_deposit = d_katown
			add_deposit = d_katzen_mountain_range
			add_deposit = d_katown_palace_primitive
			add_deposit = d_katown_reactor
			# add_deposit = d_altarian_jungle
			# add_deposit = d_manglarian_junkyard
			# add_deposit = d_catspian_sea
			# add_deposit = d_northern_ice_cap
			# add_deposit = d_southern_ice_cap
			# add_deposit = d_meowriana_trench
			# add_deposit = d_solakian_factory
			# add_deposit = d_cookian_steppes_mining
			# add_deposit = d_magnetic_puffy
			# add_deposit = d_propanian_mines
			# add_deposit = d_laurandar_shores
			# add_deposit = d_yinjite_sea_mines
			# add_deposit = d_mercurian_plains
			# add_deposit = d_ezic_farmland
			# add_deposit = d_grand_kronk_quarry
			add_deposit = d_flunat
			planet_event = { id = flusion.3 days = 1 }
		}
	#Remove mining station
	 event_target:katzenartig = {
		every_owned_ship = {
			limit = {
				is_ship_size = mining_station
				# is_ship_size = research_station
			}
			delete_ship = this
		}
		every_owned_ship = {
			limit = {
				# is_ship_size = mining_station
				is_ship_size = research_station
			}
			delete_ship = this
		}
	 }
		
	#Create Jublio
		}
		set_country_flag = flusion_setup_complete
		
	}

event = {
	id = flusion.42
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_global_flag = kaiser_is_player
		set_global_flag = katzenartig_disabled
		set_global_flag = giga_jublio_disabled
		set_global_flag = giga_jupitwo_disabled
		set_global_flag = giga_fe_pouchkinn_disabled
	}
}

event = {
	id = flusion.43
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		every_playable_country = {
			limit = {
				has_origin = origin_katzen
				NOT = {
					has_country_flag = kaiser_preset
				}
			}
			country_event = { id = flusion.44 }
		}
	}
}

country_event = {
	id = flusion.44
	title = flusion.44.name
	desc = flusion.44.desc
	picture = GFX_no_preset
	show_sound = event_assembly_fight
	is_triggered_only = yes #The game will not consider this event for starting on its own. Event will need to be triggered by another event, or by some other effect. Most events will use this.
	immediate = {
		add_modifier = {
			modifier = mod_no_preset
			days = -1
		}
	}
	option = {
		name = "flusion.44.a"
	}
}

namespace = katzen

#Solaktropa dam add
planet_event = {
	id = katzen.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		add_deposit = d_solaktropa_project
	}
}

#Katlantropa dam add
planet_event = {
	id = katzen.2
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		add_deposit = d_katlantropa_project
	}
}

#Katzen elite to soulbot
country_event = {
	id = katzen.3
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		from = {
			#Must be recruited
			NOT = { 
				prev = { 
					any_pool_leader = { 
						is_same_value = prevprev 
					} 
				} 
			}
			#Can't be a soulbot
			NOT = {
				has_leader_flag = soulbot
			}
			#Must be elite
			has_trait = katzen_trait_elite
			#Must own Solakia
			has_global_flag = solakia_conquered 
		}
	}
	immediate = {
		clone_leader = { 
			target = from
			species = event_target:soulbot
			effect = {
			set_leader_flag = soulbot
			change_leader_portrait = species
			}
		}
	}
}

#Keep Douclaw and Loris looking correct
country_event = {
	id = katzen.4
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		this = {
			has_origin = origin_katzen
		}
	}
	immediate = {
		random_owned_leader = {
			limit = {
				has_leader_flag = loris
				NOT = {
					has_leader_flag = soulbot
				}
			}
			if = {
				limit = {
					has_global_flag = silly_flusionian_portraits_enabled
				}
				change_leader_portrait = lorisreal
			}
			if = {
				limit ={
					NOT = {
						has_global_flag = silly_flusionian_portraits_enabled
					}
				}
				change_leader_portrait = loris
			}
		}
		random_owned_leader = {
			limit = {
				has_leader_flag = douclaw
				NOT = {
					has_leader_flag = soulbot
				}
			}
			if = {
				limit = {
					has_global_flag = silly_flusionian_portraits_enabled
				}
				change_leader_portrait = douclawreal
			}
			if = {
				limit ={
					NOT = {
						has_global_flag = silly_flusionian_portraits_enabled
					}
				}
				change_leader_portrait = douclaw
			}
		}
	}
}

#Set lore acurate looks (if applicable)
country_event = {
	id = katzen.6
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		this = {
			has_origin = origin_katzen
		}
		has_global_flag = silly_flusionian_portraits_enabled
	}
	immediate = {
		random_owned_leader = {
			limit = {
				has_leader_flag = loris
			}
			change_leader_portrait = lorisreal
		}
		random_owned_leader = {
			limit = {
				has_leader_flag = douclaw
			}
			change_leader_portrait = douclawreal
		}
	}
}

#Give leader elite trait part 1
country_event = {
	id = katzen.7
	is_triggered_only = yes
	title = "katzen.7.name"
	desc = "katzen.7.desc"
	trigger = {
		this = {
			has_origin = origin_katzen
		}
	}
	#Governors
	option = {
		name = "katzen.7.a"
		allow = {
			custom_tooltip = {
				fail_text = "must_have_valid_elite_governor"
				any_owned_leader = {
					leader_class = governor
					NOT = {
						has_trait = katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.8
			}
		} 
	}
	#Scientists
	option = {
		name = "katzen.7.b"
		allow = {
			custom_tooltip = {
				fail_text = "must_have_valid_elite_scientist"
				any_owned_leader = {
					leader_class = scientist
					NOT = {
						has_trait = katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.9
			}
		} 
	}
	#Admirals
	option = {
		name = "katzen.7.c"
		allow = {
			custom_tooltip = {
				fail_text = "must_have_valid_elite_admiral"
				any_owned_leader = {
					leader_class = admiral
					NOT = {
						has_trait = katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.10
			}
		} 
	}
	#Generals
	option = {
		name = "katzen.7.d"
		allow = {
			custom_tooltip = {
				fail_text = "must_have_valid_elite_general"
				any_owned_leader = {
					leader_class = general
					NOT = {
						has_trait = katzen_trait_elite
					}
				}
			}
		}
		hidden_effect = {
			country_event = {
				id = katzen.11
			}
		} 
	}
	
	option = { # Exit
		default_hide_option = yes
		name = "katzen.7.e"
	}
}

#Make Elite governor
country_event = {
	id = katzen.8
	title = "katzen.8.name"
	desc = "katzen.8.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = governor
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = governor
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = governor
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = governor
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = governor
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	

	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		} 
	}
}


#Make Elite scientist
country_event = {
	id = katzen.9
	title = "katzen.9.name"
	desc = "katzen.9.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = scientist
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = scientist
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	

	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		} 
	}
}


#Make Elite admiral
country_event = {
	id = katzen.10
	title = "katzen.10.name"
	desc = "katzen.10.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = admiral
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = admiral
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = admiral
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = admiral
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = admiral
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	

	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		} 
	}
}


#Make Elite general
country_event = {
	id = katzen.11
	title = "katzen.11.name"
	desc = "katzen.11.desc"
	is_triggered_only = yes

	immediate = {
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = general
			}
			save_event_target_as = leader_1
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = general
				NOT = { is_same_value = event_target:leader_1 }
			}
			save_event_target_as = leader_2
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = general
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
			}
			save_event_target_as = leader_3
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = general
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
			}
			save_event_target_as = leader_4
		}
		random_owned_leader = {
			limit = {
				NOR = {
					has_trait = katzen_trait_elite
					has_trait = leader_trait_ruler_kaiser_cattail
				}
				leader_class = general
				NOT = { is_same_value = event_target:leader_1 }
				NOT = { is_same_value = event_target:leader_2 }
				NOT = { is_same_value = event_target:leader_3 }
				NOT = { is_same_value = event_target:leader_4 }
			}
			save_event_target_as = leader_5
		}
	}
	option = {
		name = "katzen.8.a"
		event_target:leader_1 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.b"
		event_target:leader_2 = {
			katzen_elite = yes
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		trigger = {
			exists = event_target:leader_2
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.c"
		event_target:leader_3 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_3
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}

	option = {
		name = "katzen.8.d"
		event_target:leader_4 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_4
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	option = {
		name = "katzen.8.e"
		event_target:leader_5 = {
			katzen_elite = yes
		}
		trigger = {
			exists = event_target:leader_5
		}
		allow = {
			resource_stockpile_compare = {
				resource = unity
				value >= value:leader_katzenification_cost
			}
		}
		add_resource = {
			unity = -1
			mult = value:leader_katzenification_cost
		}
	}
	

	option = { # Back
		default_hide_option = yes
		name = "katzen.8.f"
		hidden_effect = {
			country_event = {
				id = katzen.7
			}
		} 
	}
}
