decision_flusion_arc = {
	enactment_time = 3600

	prerequisites = {
		"tech_katzen_flusioarc"
	}

	resources = {
		category = decisions
		cost = {
			influence = 200
			minerals = 20000
		}
	}

	potential = {
		from = {
			has_origin = origin_katzen
			has_country_flag = unified_flusion
		}

			has_planet_flag = gigaflusion
			NOR = {
				is_planet_class = pc_pki_flusion_ecu
				is_planet_class = pc_city
				is_planet_class = pc_relic
				has_modifier = resort_colony
				has_modifier = penal_colony
				has_modifier = slave_colony
				has_modifier = pm_wenkwort_custodian
			}
	}

	allow = {
		num_uncleared_blockers < 1
		num_pops >= 90
		custom_tooltip = {
			fail_text = need_both_dams
			has_planet_flag = solaktropa
			has_planet_flag = katlantropa
		}
	}

	effect = { 
		change_pc = pc_pki_flusion_ecu
		hidden_effect = {
			add_modifier ={
				modifier = temp_job_help
				days = 1080
			}
			add_modifier ={
				modifier = pki_flusion_ecu_modifier
				days = -1
			}
			add_district = district_pki_flusion_city
			add_district = district_pki_flusion_city
			add_district = district_pki_flusion_city
			add_district = district_pki_flusion_power
			add_district = district_pki_flusion_power
			add_district = district_pki_flusion_mining
			add_district = district_pki_flusion_mining
			add_district = district_pki_flusion_farming
			add_district = district_pki_flusion_farming
			add_district = district_pki_flusion_civilian_industry
			add_district = district_pki_flusion_civilian_industry
		}
	}
}

decision_siegfried_world = {
	enactment_time = 1800
	owned_planets_only = yes

	resources = {
		category = decisions
		cost = {
			unity = 2500
			minerals = 10000
			alloys = 5000
		}
	}

	potential = {
		from = {
			has_origin = origin_katzen
		}
		NOT = {
			has_planet_flag = gigaflusion
		}
		NOR = {
			is_planet_class = pc_pki_flusion_ecu
			is_planet_class = pc_city
			is_planet_class = pc_relic
			has_modifier = resort_colony
			has_modifier = penal_colony
			has_modifier = slave_colony
			has_modifier = pm_wenkwort_custodian
			is_planet_class = pc_player_siegfried_world
		}
	}

	allow = {
		num_uncleared_blockers < 1
		custom_tooltip = {
			fail_text = need_siegfried_stronghold
			has_building = building_siegfried_stronghold
		}
	}

	effect = { 
		hidden_effect = {
			set_planet_flag = megastructure
			set_planet_flag = giga_planet_mega
			remove_building = building_siegfried_stronghold
			add_building = building_player_siegfried_centcom
			solar_system = {
				set_star_flag = siegfried_anti_jump_star
				every_neighbor_system = { set_star_flag = siegfried_anti_jump_star }
			}
			planet_event = {
				id = pki_misc.12
			}
		}
		change_pc = {
			class = pc_player_siegfried_world
			inherit_entity = yes
		}
	}
}




decision_kaiser_moon = {
	sound = event_administrative_work
	owned_planets_only = no

	resources = {
		category = decisions
		cost = {
			unity = 1000
		}
	}

	potential = {
		is_moon = yes
		space_owner = { is_ai = no }
		solar_system.owner = {
			has_country_flag = do_you_wanna_build_a_moon_man
		}
		NOT = {
			is_colony = yes
		}
		from = {
			NOT = {
				any_controlled_fleet = {
					has_fleet_flag = current_katzen_flagship
				}
			}
		}
		
	}
	allow = {
		from = {
			NOT = {
				 any_situation = {
					is_situation_type = situation_kaiser_moon
				 }
			}
		}
	}

	effect = {
		solar_system.owner = {
			country_event = {
				id = kmoon.200
			}
		}
		planet = {
			save_global_event_target_as = new_moon
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

#builds solaktropa dams
decision_solaktropa = {
	prerequisites = {
		"tech_capital_productivity_1"
	}
    enactment_time = 720
    resources = {
        category = decisions
        cost = {
            influence = 50
            minerals = 7500
        }
    }
    potential = {
        from = {
			has_origin = origin_katzen
        }
        has_planet_flag = gigaflusion
        NOT = {
            has_planet_flag = solaktropa
        }
    }
	allow = {
		custom_tooltip = {
			fail_text = no_forest
			has_deposit = d_altarian_island
		}
	}
    effect = {
		add_deposit = d_solaktropa_project
		hidden_effect = {
			set_planet_flag = solaktropa
		}
	}
}

#Housing Dam
decision_katlantropa = {
	prerequisites = {
		"tech_capital_productivity_1"
	}
    enactment_time = 720
    resources = {
        category = decisions
        cost = {
            influence = 50
            minerals = 7500
        }
    }
    potential = {
        from = {
			has_origin = origin_katzen
        }
            has_planet_flag = gigaflusion
        
        NOT = {
            has_planet_flag = katlantropa
        }
    }
    effect = {
		add_deposit = d_katlantropa_project
		hidden_effect = {
			set_planet_flag = katlantropa
		}
    }
}

#Housing Dam
decision_katzen_housing_dam = {
	owned_planets_only = yes
    prerequisites = {
        "tech_capital_productivity_2"
    }
    enactment_time = 720
    resources = {
        category = decisions
        cost = {
            influence = 50
            minerals = 7500
        }
    }
    potential = {
    	from = {
        	has_origin = origin_katzen
        }
	NOT = {
		has_planet_flag = gigaflusion
	}
		
	is_artificial = no
    }

	allow = {
		custom_tooltip = {
			fail_text = no_other_dam
        	NOR = {
            	has_deposit = d_katzen_housing_dam
				has_deposit = d_katzen_food_dam
				has_deposit = d_katzen_mineral_dam
				has_deposit = d_katzen_energy_dam
        	}
		}
	}

	on_queued = {
		set_planet_flag = katzen_dam
	}

	on_unqueued = {
		remove_planet_flag = katzen_dam
	}
    effect = {
		add_deposit = d_katzen_housing_dam
    }
}

#food dam
decision_katzen_food_dam = {
	owned_planets_only = yes
    prerequisites = {
        "tech_capital_productivity_2"
    }
    enactment_time = 720
    resources = {
        category = decisions
        cost = {
            influence = 50
            minerals = 7500
        }
    }
    potential = {
    	from = {
        	has_origin = origin_katzen
        }
	NOT = {
		has_planet_flag = gigaflusion
	}
		
	is_artificial = no
    }

	allow = {
		custom_tooltip = {
			fail_text = no_other_dam
        	NOR = {
            	has_deposit = d_katzen_housing_dam
				has_deposit = d_katzen_food_dam
				has_deposit = d_katzen_mineral_dam
				has_deposit = d_katzen_energy_dam
        	}
		}
		custom_tooltip = {
			fail_text = cannot_be_dry
			NOR = {
				is_planet_class = pc_desert
				is_planet_class = pc_outback
				is_planet_class = pc_coastal
				is_planet_class = pc_sandsea
				is_planet_class = pc_oasis
				is_planet_class = pc_arid
				is_planet_class = pc_savannah
				is_planet_class = pc_steppe
				is_planet_class = pc_mesa
				is_planet_class = pc_badlands
				is_planet_class = pc_hadesert
				is_planet_class = pc_prairie
				is_planet_class = pc_veld
				is_planet_class = pc_semiarid
				is_planet_class = pc_med
			}
		}
	}

	on_queued = {
		set_planet_flag = katzen_dam
	}

	on_unqueued = {
		remove_planet_flag = katzen_dam
	}
    effect = {
		add_deposit = d_katzen_food_dam
    }
}

#mineral dam
decision_katzen_mineral_dam = {
	owned_planets_only = yes
    prerequisites = {
        "tech_capital_productivity_2"
    }
    enactment_time = 720
    resources = {
        category = decisions
        cost = {
            influence = 50
            minerals = 7500
        }
    }
    potential = {
    	from = {
        	has_origin = origin_katzen
        }
	NOT = {
		has_planet_flag = gigaflusion
	}
		
	is_artificial = no
    }

	allow = {
		custom_tooltip = {
			fail_text = no_other_dam
        	NOR = {
            	has_deposit = d_katzen_housing_dam
				has_deposit = d_katzen_food_dam
				has_deposit = d_katzen_mineral_dam
				has_deposit = d_katzen_energy_dam
        	}
		}
	}

	on_queued = {
		set_planet_flag = katzen_dam
	}

	on_unqueued = {
		remove_planet_flag = katzen_dam
	}

    effect = {
		add_deposit = d_katzen_mineral_dam
    }
}

#katzen energy dam
decision_katzen_energy_dam = {
	owned_planets_only = yes
    prerequisites = {
        "tech_capital_productivity_2"
    }
    enactment_time = 720
    resources = {
        category = decisions
        cost = {
            influence = 50
            minerals = 7500
        }
    }
    potential = {
    	from = {
        	has_origin = origin_katzen
        }
	NOT = {
		has_planet_flag = gigaflusion
	}
		
	is_artificial = no
    }

	allow = {
		custom_tooltip = {
			fail_text = no_other_dam
        	NOR = {
            	has_deposit = d_katzen_housing_dam
				has_deposit = d_katzen_food_dam
				has_deposit = d_katzen_mineral_dam
				has_deposit = d_katzen_energy_dam
        	}
		}
	}

	on_queued = {
		set_planet_flag = katzen_dam
	}

	on_unqueued = {
		remove_planet_flag = katzen_dam
	}

    effect = {
		add_deposit = d_katzen_energy_dam
    }
}

decision_katzen_defense_array_1 = {
	owned_planets_only = yes
	enactment_time = 720
	resources = {
		category = decisions
		cost = {
			unity = 100
			alloys = 1000
		}
	}
	potential = {
		from = {
			has_origin = origin_katzen
			has_country_flag = unified_flusion
		}
		NOT = {
			any_fleet_in_orbit = {
				has_fleet_flag = katzen_planet_platform_player_1
			}
		}
	}

	effect = { 
		create_fleet = {
			name = "Katzenplanetenverteidigung"
			settings = { spawn_debris = no }
			effect = {
				set_owner = ROOT
				create_ship = {
					name = "Katzenplanetenverteidigung"
					random_existing_design = katzen_player_warforge_platform
					upgradable = yes
				}
				set_location = {
					target = ROOT
					distance = 0
					angle = 0
				}
				set_fleet_flag = katzen_planet_platform_player_1			}
		}
	}
}

decision_katzen_war_forge = {
	owned_planets_only = no
	enactment_time = 0
	resources = {
		category = decisions
		cost = {
			unity = 100
			alloys = 1000
		}
	}
	potential = {
		OR = {
			from = {
				has_origin = origin_katzen
				has_country_flag = unified_flusion
			}
			from = {
				has_technology = tech_pki_warforge
				is_specialist_subject_tier = { TYPE = katzprotektorat TIER = 1}
			}
		}
		NOT = {
			has_planet_flag = war_forge
		}
		is_star = no
		OR = {
			habitable_planet = yes
			is_planet_class = pc_pki_flusion_ecu
			is_planet_class = pc_nuked
		}
		is_artificial = no
		giga_habitable_structure = no
		is_colony = yes
		owner = {
			is_primitive = no
		}
	}
	effect = {
		solar_system = {
			spawn_megastructure = {
				type = katzen_war_forge_0
				planet = ROOT
				owner = event_target:katzenartig
			}
			random_system_megastructure = {
				limit = {
					is_megastructure_type = katzen_war_forge_0
					planet = { is_same_value = ROOT } 
				}
				upgrade_megastructure_to = katzen_war_forge_1
			}
		}
		set_planet_flag = war_forge
	}
	ai_weight = {
		base = 1000
	}
}

decision_kaiser_craft_recall = {
	enactment_time = 30
    resources = {
        category = decisions
        cost = {
            influence = 50
        }
    }
	sound = event_red_alert
    potential = {
        from = {
			has_origin = origin_katzen
			any_controlled_fleet = {
				has_fleet_flag = current_katzen_flagship
			}
        }
		has_planet_flag = gigaflusion
    }
	effect = {
		from = {
			every_controlled_fleet = {
				limit = {
					has_fleet_flag = current_katzen_flagship
				}
				set_location = event_target:gigaflusion
			}
		}
	}
}

decision_demotion_modifier = {
	enactment_time = 10
    resources = {
        category = decisions
        cost = {
            influence = 100
        }
    }
	sound = event_administrative_work
    potential = {
        from = {
			has_origin = origin_katzen
			has_tradition = tr_flusion_finish
        }
		has_planet_flag = gigaflusion
    }
	effect = {
		add_modifier = {
			modifier = temp_job_help days = 30
		}
	}
}

decision_toggle_relocation = {
	enactment_time = 10
    resources = {
        category = decisions
        cost = {
            unity = 250
        }
    }
	sound = event_administrative_work
    potential = {
        from = {
			has_origin = origin_katzen
			has_tradition = tr_flusion_finish
        }
		NOT = {
			has_planet_flag = gigaflusion
		}
		is_colony = yes
    }
	effect = {
		if = {
			limit = { NOT = {
				has_modifier = no_relocation
			} }
			add_modifier = {
				modifier = no_relocation
				days = -1
			}
		}
		else_if = {
			limit = { has_modifier = no_relocation }
			remove_modifier = no_relocation
		}
	}
}

decision_depopulate_planet = {
	enactment_time = 60
    resources = {
        category = decisions
        cost = {
            influence = 200
        }
    }
	sound = event_administrative_work
    potential = {
        from = {
			has_origin = origin_katzen
			has_tradition = tr_flusion_finish
        }
		NOT = {
			has_planet_flag = gigaflusion
		}
		is_colony = yes
    }
	effect = {
		hidden_effect = {
			every_owned_pop = {
				resettle_pop = {
					pop = THIS
					planet = event_target:playerflusion
				}
			}
			remove_modifier = central_instability
			remove_modifier = katzen_colony
			remove_deposit = d_bureau_of_colonial_benefits
			remove_deposit = d_flusion_bounty_colony
			remove_modifier = no_relocation
		}
	}
}

decision_pki_societal_restructuring = {
	enactment_time = 3600
	resources = {
        category = decisions
        cost = {
            influence = 500
			alloys = 30000
			minerals = 50000
			unity = 10000
        }
    }
	sound = event_administrative_work
    potential = {
		NOT = {
			has_planet_flag = societal_reconstruction_started
		}
        from = {
			has_origin = origin_katzen
        }
		has_planet_flag = gigaflusion
		is_planet_class = pc_pki_flusion_ecu
		is_colony = yes
    }
	allow = {
		num_pops >= 750 
	}
	effect = {
		custom_tooltip = pki_expand_flusion
		hidden_effect = {
			set_planet_flag = societal_reconstruction_started
			planet = {
				set_variable = {
					which = pki_flusion_job_size
					value = 1
				}
			}
			add_deposit = d_pki_flusion_societal_restructuring
			add_deposit = d_giga_job_size
			add_deposit = d_giga_job_upkeep
			every_owned_pop = {
				random = {
					chance = 50
					kill_pop = yes
				}
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_city
				VARIABLE = pki_num_city_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_civilian_industry
				VARIABLE = pki_num_civ_industry_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_heavy_industry
				VARIABLE = pki_num_heavy_industry_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_science
				VARIABLE = pki_num_science_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_mining
				VARIABLE = pki_num_mining_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_farming
				VARIABLE = pki_num_farming_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_power
				VARIABLE = pki_num_energy_districts
			}
		}
	}
}

decision_pki_further_restructuring = {
	enactment_time = 3600
	resources = {
        category = decisions
        cost = {
			alloys = 30000
			minerals = 50000
			unity = 10000
			multiplier = pki_flusion_job_size
        }
		cost = {
			influence = 500
		}
    }
	sound = event_administrative_work
    potential = {
        from = {
			has_origin = origin_katzen
        }
		has_planet_flag = societal_reconstruction_started
		has_planet_flag = gigaflusion
		is_planet_class = pc_pki_flusion_ecu
		is_colony = yes
    }
	allow = {
		num_pops >= 750 
	}
	effect = {
		custom_tooltip = pki_expand_flusion_more
		hidden_effect = {
			planet = {
				multiply_variable = { 
					which = pki_flusion_job_size
					value = 1.25
				}
			}
			every_owned_pop = {
				random = {
					chance = 50
					kill_pop = yes
				}
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_city
				VARIABLE = pki_num_city_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_civilian_industry
				VARIABLE = pki_num_civ_industry_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_heavy_industry
				VARIABLE = pki_num_heavy_industry_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_science
				VARIABLE = pki_num_science_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_mining
				VARIABLE = pki_num_mining_districts
			}
			pki_district_conversion = {
				DISTRICT = district_pki_flusion_farming
				VARIABLE = pki_num_farming_districts
			}
			add_deposit = d_pki_flusion_societal_restructuring
		}
	}
}